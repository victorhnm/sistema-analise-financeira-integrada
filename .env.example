# =============================================================================
# INTEGRATED FINANCIAL ANALYSIS - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and configure with your actual values

# -----------------------------------------------------------------------------
# SUPABASE DATABASE (PRODUCTION)
# -----------------------------------------------------------------------------
SUPABASE_HOST=your-project-id.supabase.co
SUPABASE_PASSWORD=your-database-password
SUPABASE_PORT=5432
SUPABASE_USER=postgres
SUPABASE_DBNAME=postgres

# Complete connection string
DATABASE_URL=postgresql://postgres:your-password@your-project-id.supabase.co:5432/postgres?sslmode=require

# -----------------------------------------------------------------------------
# SEC EDGAR API (REQUIRED)
# -----------------------------------------------------------------------------
# IMPORTANT: Use your real name and email as required by SEC
SEC_USER_AGENT="Your Name your.email@example.com"

# SEC API configuration
SEC_BASE_URL=https://data.sec.gov/api/xbrl/companyfacts
SEC_RATE_LIMIT_RPS=5.0
SEC_MAX_RETRIES=3
SEC_BACKOFF_FACTOR=2.0

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true

# API pagination and limits
API_DEFAULT_PAGE_SIZE=50
API_MAX_PAGE_SIZE=1000
API_RATE_LIMIT_PER_MINUTE=60

# CORS origins (for frontend development)
API_ALLOW_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# -----------------------------------------------------------------------------
# ETL PIPELINE CONFIGURATION
# -----------------------------------------------------------------------------
# Processing limits
ETL_MAX_WORKERS=3
ETL_CHUNK_SIZE=10
ETL_BATCH_SIZE=100

# Retry logic
ETL_MAX_RETRIES=3
ETL_RETRY_DELAY=1.0

# Data retention
ETL_LOOKBACK_YEARS=5

# Execution mode
ETL_MODE=incremental  # or 'full_refresh'

# -----------------------------------------------------------------------------
# DBT CONFIGURATION
# -----------------------------------------------------------------------------
DBT_PROFILES_DIR=~/.dbt
DBT_TARGET_SCHEMA=core
DBT_MODELS_PATH=models
DBT_THREADS=2

# Materialization strategies
DBT_STAGING_MATERIALIZATION=view
DBT_MARTS_MATERIALIZATION=table
DBT_INCREMENTAL_STRATEGY=append

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json  # or 'text'
LOG_FILE_PATH=logs/app.log

# Debug flags
DEBUG_SQL_QUERIES=false
DEBUG_API_REQUESTS=false
DEBUG_ETL_PROGRESS=true

# -----------------------------------------------------------------------------
# POWER BI CONFIGURATION
# -----------------------------------------------------------------------------
# Schema for BI views
BI_SCHEMA=marts
BI_REFRESH_SCHEDULE=daily

# Export settings
EXPORT_FORMAT=parquet  # or 'csv'
EXPORT_PATH=exports/

# -----------------------------------------------------------------------------
# GITHUB ACTIONS / CI CONFIGURATION
# -----------------------------------------------------------------------------
# Environment type
ENVIRONMENT=local  # local, dev, staging, prod

# Feature flags
ENABLE_GREAT_EXPECTATIONS=false
ENABLE_DQM=true  # Data Quality Monitoring
ENABLE_ALERTS=false

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# API Secret (generate a secure hash for production)
API_SECRET_KEY=your-secret-key-here-change-in-production

# SSL Settings (enable for production)
SSL_REQUIRE=false  # set to true for production
SSL_CERT_PATH=""
SSL_KEY_PATH=""

# -----------------------------------------------------------------------------
# OPTIONAL FEATURES
# -----------------------------------------------------------------------------
# Foreign Exchange rates
FX_SOURCE=ECB  # ECB or FRED
ECB_BASE_URL=https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml
FRED_API_KEY=your_fred_api_key_here
FX_RATE_LIMIT_RPS=10.0

# Redis cache (optional)
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=3600  # 1 hour
ENABLE_CACHING=false

# Notifications (optional)
SLACK_WEBHOOK_URL=""
EMAIL_SMTP_SERVER=""
EMAIL_SMTP_PORT=587
EMAIL_FROM=""
EMAIL_TO=""

# -----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS
# -----------------------------------------------------------------------------
# Debug mode
DEBUG=true

# Save raw responses for debugging
SAVE_RAW_RESPONSES=true
RAW_DATA_PATH=debug/raw/

# Mock APIs for testing
USE_MOCK_SEC_API=false
USE_MOCK_FX_API=false

# -----------------------------------------------------------------------------
# PROJECT METADATA (CALCULATED AUTOMATICALLY)
# -----------------------------------------------------------------------------
PROJECT_NAME=integrated-financial-analysis
PROJECT_VERSION=1.0.0
PROJECT_DESCRIPTION="Integrated Financial Analysis - End-to-End Pipeline"

# Date/time configuration
TIMEZONE=America/New_York  # NYSE timezone
DATE_FORMAT=YYYY-MM-DD
DATETIME_FORMAT=YYYY-MM-DD HH:mm:ss

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
#
# 1. REQUIRED: Configure SEC_USER_AGENT with your real name and email
# 2. REQUIRED: Set up Supabase project and configure database credentials
# 3. OPTIONAL: Get FRED API key for alternative FX rates: https://fred.stlouisfed.org/
# 4. PRODUCTION: Change all passwords, secrets, and enable SSL
# 5. CI/CD: Configure corresponding secrets in GitHub repository
#
# Useful links:
# - SEC EDGAR API: https://www.sec.gov/edgar/sec-api-documentation
# - Supabase Documentation: https://supabase.com/docs
# - dbt Documentation: https://docs.getdbt.com/
# - FastAPI Documentation: https://fastapi.tiangolo.com/
#
# =============================================================================